<html>
    <head>
        <title>Pimp your tests</title>
        <style type="text/css">
            body {
                padding: 0;
                margin: 0;
                background: #FFF;
                font: 100.01% / 1.3 Verdana, Arial, sans-serif;
            }


            h1 {
                font: lighter 200% "Trebuchet MS", Arial sans-serif;
                color: #208BE1
            }

            h1, p {
                margin: 0;
                padding: 10px 20px
            }

      
</style>
       <script type="text/javascript" src="/scripts/niftycube.js"></script>
      <script type="text/javascript" src="/scripts/controls.js"></script>
      <script type="text/javascript" src="/scripts/dragdrop.js"></script>
      <script type="text/javascript" src="/scripts/effects.js"></script>
      <script type="text/javascript" src="/scripts/prototype.js"></script>
      <script type="text/javascript" src="/scripts/scriptaculous.js"></script>
       <link rel="StyleSheet" href="/stylesheets/active_sheet.css" type="text/css" media="screen"/>
      <script type="text/javascript">
            window.onload=function(){
            //Nifty("div#list","big");
            //Nifty("ul#nav a","small transparent top");
            //Nifty("ul#test_books a","normal all")
            }

            function displayFixtureList(list){

                var f = document.getElementById(list);
                if (f.style.display == "none" || f.style.display == ""){
                   f.style.display = "block";
                }else{
                   f.style.display = "none";  
                }

            }

            function addNewFixture(element, drop, event){
                //get the class and method
                info = element.id.split("\:")
                params = {class: info[0], method: info[1], position: "last"} //will always be last for now.break
                url = "\/<%= @location %>\/add_fixture"
                new Ajax.Updater('content',url,
                                     {
                                      method: 'post',
                                      parameters: params,
                                      onLoading: showLoad,
                                      onComplete: hideLoad,
                                      insertion: 'bottom'
                                     }
                        )
            }

            function deleteElement(element){
                //create an Ajax POST request that will delete the element from the server
                //and then update the entire content area
                params = {element: element};
                url = "\/<%= @location %>\/delete_element";
                new Ajax.Updater('content',url,{
                    method: 'post',
                    parameters: params,
                    onLoading: showLoad,
                    onComplete: hideLoad
                })
            }

            function showLoad(){

            }

            function hideLoad(){
                
            }
      </script>

	<script type="text/javascript" language="JavaScript">
	<!--
	function file_onchange() {
	  var s=document.getElementById('userfile').value;
	  var r=s.lastIndexOf('/');
	  if (r<0) {
	    r=s.lastIndexOf('\\\\');
	  }
	  if (r>=0) {
	    s=s.substr(r+1);
	  }
	  document.getElementById('remotename').value=s;
	}
	-->
	</script>
    </head>

<body>
<div id="header">
<h2 id="title" class="white-text">Pimp Those Tests!</h2>
    <div id="menu">
        <ul id="nav">
            <li><a href="#">Run All</a></li>
            <li><a href="#">Config</a></li>
            <li><a href="#">Variables</a></li>
            <li><a href="#">Properties</a></li>
            <li><a href="#">Add</a></li>
        </ul>
    </div>
    <div id="breadcrumb">
        <%= breadcrumb %>
    </div>
  </div>
    <div class="left">
        <%= @page_list %>
        <%= fixtures %>
		<form action="/fixture" method="post" accept-charset="utf-8" enctype='multipart/form-data'>
			<!--<label for="txt_file"></label><input type="text" name="filename" value="" id="txt_file"> -->
			<input type="file" name="file_info" id='userfile'>
			<input type="hidden" name="filename" value="" id="remotename" onChange="file_onchange()">
			<input type="submit" name="btn_file" value="Upload" id="btn_file">
			
		</form>
    </div>
    <div id="content" class="content">
<%= @html %>
    </div>
    <script type="text/javascript">
      Droppables.add('content', {hoverclass: "hovering", accept: 'draggable', onDrop: addNewFixture});
    </script>
</body>

</html>
